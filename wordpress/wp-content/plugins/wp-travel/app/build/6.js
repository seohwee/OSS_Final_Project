(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{108:function(e,t,n){"use strict";var a=n(0);t.a=function(){return Object(a.createElement)("div",{className:"wptravel-loader"},Object(a.createElement)("div",null),Object(a.createElement)("div",null),Object(a.createElement)("div",null),Object(a.createElement)("div",null))}},205:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n.n(a),i=n(7),c=n.n(i),l=n(0),o=n(9),s=n.n(o),u=n(4),p=n(5),d=(n(1),n(87)),m=n.n(d),f=n(95),_=n(45),v=n(93),b=n(108);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=Object(l.lazy)((function(){return n.e(3).then(n.t.bind(null,127,7))})),j=Object(l.lazy)((function(){return n.e(8).then(n.bind(null,201))})),w=Object(l.lazy)((function(){return n.e(7).then(n.bind(null,105))})),y=Object(l.lazy)((function(){return n.e(10).then(n.bind(null,106))})),E=Object(l.lazy)((function(){return n.e(9).then(n.bind(null,107))})),h=Object(l.lazy)((function(){return n.e(5).then(n.bind(null,202))})),x=lodash,Y=(_wp_travel.currency_symbol,function(e){var t=e.children;e.className;return Object(l.createElement)("div",{className:"wp-travel-booking__notice is-info"},Object(l.createElement)("svg",{id:"Capa_1",enableBackground:"new 0 0 524.235 524.235",height:"512",viewBox:"0 0 524.235 524.235",width:"512"},Object(l.createElement)("path",{d:"m262.118 0c-144.53 0-262.118 117.588-262.118 262.118s117.588 262.118 262.118 262.118 262.118-117.588 262.118-262.118-117.589-262.118-262.118-262.118zm17.05 417.639c-12.453 2.076-37.232 7.261-49.815 8.303-10.651.882-20.702-5.215-26.829-13.967-6.143-8.751-7.615-19.95-3.968-29.997l49.547-136.242h-51.515c-.044-28.389 21.25-49.263 48.485-57.274 12.997-3.824 37.212-9.057 49.809-8.255 7.547.48 20.702 5.215 26.829 13.967 6.143 8.751 7.615 19.95 3.968 29.997l-49.547 136.242h51.499c.01 28.356-20.49 52.564-48.463 57.226zm15.714-253.815c-18.096 0-32.765-14.671-32.765-32.765 0-18.096 14.669-32.765 32.765-32.765s32.765 14.669 32.765 32.765c0 18.095-14.668 32.765-32.765 32.765z"})),t)}),T={selectedDate:null,selectedTripDate:[],nomineePricings:[],nomineeTimes:[],selectedPricing:null,selectedDateTime:null,selectedTime:null,rruleAll:{},paxCounts:{},tripExtras:{},inventory:[],isLoading:!1,excludedDateTimes:[],pricingUnavailable:!1,tempExcludeDate:[]},k=D({},_wp_travel.strings),M=function(e){var t=e.inventory,n=(t.wp_travel_inventory_pax_limit_type,t.wp_travel_inventory_sold_out_action),a=(t.wp_travel_inventory_custom_max_pax,t.wp_travel_inventory_sold_out_message);t.wp_travel_inventory_status_message_format;return"show_sold_out_msg_only"==n?Object(l.createElement)("p",{className:"wp-travel-sold-out"},a):"allow_trip_enquiry"==n?Object(l.createElement)("p",{className:"wp-travel-sold-out"},Object(l.createElement)("a",{className:"wp-travel-send-enquiries","data-effect":"mfp-move-from-top",href:"#wp-travel-enquiries",onClick:function(){var e=document.getElementById("wp-travel-send-enquiries");e&&e.click()}},k.trip_enquiry)):Object(l.createElement)("p",null,k.bookings.pricing_not_available)};t.default=function(){var e=Object(l.useState)(T),t=r()(e,2),n=t[0],a=n.selectedDate,i=n.selectedTripDate,o=n.selectedTime,d=n.nomineePricings,g=n.nomineeTimes,S=n.selectedPricing,C=n.selectedDateTime,P=n.excludedDateTimes,L=(n.rruleAll,n.paxCounts),F=n.tripExtras,I=n.inventory,N=n.isLoading,z=n.pricingUnavailable,H=n.tempExcludeDate,q=t[1],U=function(e){q((function(t){return D(D({},t),e)}))},B=Object(u.useSelect)((function(e){return e("WPTravelFrontend/BookingWidget").getAllStore()}),[]),A=B.tripData&&B.tripData.pricings&&x.keyBy(B.tripData.pricings,(function(e){return e.id})),R=void 0!==B.tripData.dates&&B.tripData.dates.length>0?B.tripData.dates:[],W=B.tripData.is_fixed_departure||!1,V=B.tripData.inventory&&"yes"===B.tripData.inventory.enable_trip_inventory,J=x.keyBy(R,(function(e){return e.id})),X=B.tripData.trip_duration.days&&parseInt(B.tripData.trip_duration.days)||1,Q=B.tripData.excluded_dates_times&&B.tripData.excluded_dates_times.length>0&&B.tripData.excluded_dates_times||[],$=[];Object(l.useEffect)((function(){$=($=Q.filter((function(e){if(e.trip_time.length>0){var t=e.trip_time.split(",").map((function(t){return m()("".concat(e.start_date," ").concat(t)).toDate()}));return C&&!Q.includes(m()(e.start_date).format("YYYY-MM-DD"))||P.push(t[0]),!1}return!0}))).map((function(e){return e.start_date})),U({tempExcludeDate:$})}),[C]),Object(l.useEffect)((function(){W||(U({nomineePricings:Object.keys(A)}),N&&U({isLoading:!1}))}),[a]),Object(l.useEffect)((function(){1===d.length&&(ce(d[0])(),U({isLoading:!0}))}),[a]),Object(l.useEffect)((function(){if(S){var e={pricingUnavailable:!1},t=re(S,i);if(N)if(V&&W)ie(S,a,t);else{var n=A[S],r=n.categories,l={};r.forEach((function(e){l=D(D({},l),{},c()({},e.id,parseInt(e.default_pax)||0))}));var o=n.max_pax||999,s={};if(n.trip_extras.length>0&&n.trip_extras.forEach((function(e){s=D(D({},s),{},c()({},e.id,e.is_required?1:0))})),e=D(D({},e),{},{isLoading:!1,inventory:[{date:m()(C).format("YYYY-MM-DD[T]HH:mm"),pax_available:o,booked_pax:0,pax_limit:o}],nomineeTimes:[],tripExtras:s,paxCounts:l}),t.length>0){var u=t.map((function(e){return m()("".concat(a.toDateString()," ").concat(e))})).filter((function(e){return!P.find((function(t){return m()(t).isSame(e)}))}));e=D(D({},e),{},{selectedDateTime:u[0].toDate(),selectedTime:u[0].format("HH:mm"),nomineeTimes:u,inventory:[{date:u[0].format("YYYY-MM-DD[T]HH:mm"),pax_available:o,booked_pax:0,pax_limit:o}]})}}U(e)}}),[S,C]),Object(l.useEffect)((function(){if(!V&&S){var e=A[S].max_pax||999;U({inventory:[{date:m()(C).format("YYYY-MM-DD[T]HH:mm"),pax_available:e,booked_pax:0,pax_limit:e}]})}}),[C]);var G=function(e,t){var n={freq:f.c.DAILY,dtstart:t.toDate(),until:t.toDate()},a=e.years?e.years.split(",").filter((function(e){return"every_year"!=e})).map((function(e){return parseInt(e)})):[];if(a.length>0&&!a.includes(t.year()))return[];var r=e.months?e.months.split(",").filter((function(e){return"every_month"!=e})):[],i=e.date_days?e.date_days.split(",").filter((function(e){return"every_weekdays"!==e&&""!==e})):[],c=e.days?e.days.split(",").filter((function(e){return"every_date_days"!==e&&""!==e})):[];return r.length>0&&(n.bymonth=r.map((function(e){return parseInt(e)}))),c.length>0?n.byweekday=c.map((function(e){return f.c[e]})):i.length>0&&(n.bymonthday=i.map((function(e){return parseInt(e)}))),new f.c(n).all()},K=function(e){if(m()(e).isBefore(m()(new Date)))return!1;if(!W)return!0;var t=e.getFullYear(),n=e.getDate(),a=e.getMonth(),r=m()(new Date(Date.UTC(t,a,n,0,0,0))).utc();if(H.includes(r.format("YYYY-MM-DD")))return!1;var i=R.find((function(t){if(t.is_recurring){var n=t.years?t.years.split(",").filter((function(e){return"every_year"!=e})).map((function(e){return parseInt(e)})):[];if(t.end_date&&"invalid date"!=m()(e).toDate().toString().toLowerCase()&&m()(e).isAfter(m()(t.end_date)))return!1;if(t.start_date&&"invalid date"!=m()(e).toDate().toString().toLowerCase()&&m()(e).isBefore(m()(t.start_date)))return!1;if(n.length>0&&!n.includes(r.year()))return!1;var a=G(t,r);if(!Object(p.applyFilters)("wpTravelRecurringCutofDateFilter",!0,a,B.tripData,e,t))return;return a.find((function(t){return m()(m()(t).format("YYYY-MM-DD")).unix()===m()(m()(e).format("YYYY-MM-DD")).unix()}))instanceof Date}if(t.start_date){if(!Object(p.applyFilters)("wpTravelCutofDateFilter",!0,B.tripData,e,t))return;return m()(e).isSame(m()(t.start_date))}return!1}));return i&&void 0!==i.id},Z=function(e,t,n){var a=m()(new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0))).utc(),r=R.filter((function(n){return n.is_recurring&&(void 0===t&&"dates"===ve||"calendar"===ve)?(!n.end_date||"invalid date"==m()(e).toDate().toString().toLowerCase()||!m()(e).isAfter(m()(n.end_date)))&&G(n,a).find((function(t){return m()(m()(t).format("YYYY-MM-DD")).unix()===m()(m()(e).format("YYYY-MM-DD")).unix()}))instanceof Date:n.start_date?m()(e).isSame(m()(n.start_date)):m()(n.start_date).isSame(m()(e))})).map((function(e){return e.id}));if(!n){var i=r.map((function(e){return J[e].pricing_ids.split(",").map((function(e){return e.trim()}))}));return i=x.chain(i).flatten().uniq().value().filter((function(e){return""!=e&&void 0!==A[e]}))}return r},ee=function(e){return function(){U({selectedDateTime:e.toDate(),selectedTime:e.format("HH:mm")})}},te=function(e,t){return function(n){A[S].categories.find((function(t){return t.id===e}));var a=L[e]+t<0?0:L[e]+t,r=I.find((function(e){return e.date===m()(C).format("YYYY-MM-DD[T]HH:mm")})),i=r&&r.pax_available;if(i>=1){if((x.size(L)>0&&Object.values(L).reduce((function(e,t){return e+t}))||0)+t>parseInt(i)){if(n.target.parentElement.querySelector(".error"))return;var l=document.createElement("em");return l.classList.add("error"),l.textContent=k.bookings.max_pax_exceeded,n.target.parentElement.appendChild(l),void setTimeout((function(){l.remove()}),1e3)}n.target.parentElement.querySelector(".error")&&n.target.parentElement.querySelector(".error").remove()}U({paxCounts:D(D({},L),{},c()({},e,a))})}},ne=function(e){var t,n=0;if(t=x.size(L)>0&&Object.entries(L).map((function(e){var t=r()(e,2),a=t[0],i=t[1];return n+=parseInt(i),i>0&&ae(a,i)||0})).reduce((function(e,t){return e+t}))||0,!e||n<=0)return t;var a=S&&x.keyBy(A[S].trip_extras,(function(e){return e.id}));return t+(x.size(F)>0&&Object.entries(F).map((function(e){var t=r()(e,2),n=t[0],i=t[1],c=a[n];if(!c||void 0===c.tour_extras_metas)return 0;var l=c.is_sale&&c.tour_extras_metas.extras_item_sale_price||c.tour_extras_metas.extras_item_price;return parseFloat(l)*i})).reduce((function(e,t){return e+t}))||0)},ae=function(e,t){var n=A[S].categories.find((function(t){return t.id==e}));if(n){var a=n&&n.is_sale?n.sale_price:n.regular_price;if(n.has_group_price&&n.group_prices.length>0){var r=x.orderBy(n.group_prices,(function(e){return parseInt(e.max_pax)})).find((function(e){return parseInt(e.min_pax)<=t&&parseInt(e.max_pax)>=t}));a=r&&r.price?"group"===n.price_per?t>0&&parseFloat(r.price)||0:parseFloat(r.price)*t:"group"===n.price_per?t>0&&parseFloat(a)||0:parseFloat(a)*t}else a="group"===n.price_per?t>0&&parseFloat(a)||0:parseFloat(a)*t;return a||0}},re=function(e,t){var n=t.map((function(t){var n=J[t];if(n.pricing_ids&&n.pricing_ids.split(",").includes(e)){var a=n.trip_time&&n.trip_time.split(",")||[];return a=Object(p.applyFilters)("wpTravelCutofTimeFilter",a,B.tripData,C)}return[]}));return x.chain(n).flatten().uniq().value()},ie=function(e,t,n){s()({url:"".concat(_wp_travel.ajax_url,"?action=wp_travel_get_inventory&pricing_id=").concat(e,"&trip_id=").concat(B.tripData.id,"&selected_date=").concat(m()(t).format("YYYY-MM-DD"),"&times=").concat(n.join(),"&_nonce=").concat(_wp_travel._nonce)}).then((function(t){if(t.success&&"WP_TRAVEL_INVENTORY_INFO"===t.data.code){if(t.data.inventory.length<=0)return;var a=t.data.inventory.filter((function(e){return e.pax_available>0&&!P.find((function(t){return m()(t).isSame(m()(e.date))}))})).map((function(e){return m()(e.date)})),r={isLoading:!1},i={},l=A[e];l.trip_extras.length>0&&(l.trip_extras.forEach((function(e){i=D(D({},i),{},c()({},e.id,e.is_required?1:0))})),r=D(D({},r),{},{tripExtras:i}));var o=l.categories,s={};o.forEach((function(e){s=D(D({},s),{},c()({},e.id,parseInt(e.default_pax)||0))})),r=D(D({},r),{},{paxCounts:s}),r=a.length>0&&D(D({},r),{},{selectedDateTime:a[0].toDate(),selectedTime:a[0].format("HH:mm")})||r,r=n.length>0&&D(D({},r),{},{nomineeTimes:a})||r,a.length<=0&&(r=D(D({},r),{},{pricingUnavailable:!0})),r=t.data.inventory.length>0&&D(D({},r),{},{inventory:t.data.inventory})||D(D({},r),{},{pricingUnavailable:!0}),U(r)}}))},ce=function(e){return function(){var t={isLoading:!0};t.selectedPricing=e,U(t)}};Object(l.useEffect)((function(){jQuery(".wti__selector-item.active").find(".wti__selector-content-wrapper").slideDown()}));var le=Object(l.forwardRef)((function(e,t){e.value;var n=e.onClick;return _wp_travel.itinerary_v2?Object(l.createElement)("button",{className:"wp-travel-date-picker-btn",onClick:n},a?!W&&"".concat(m()(a).format("MMM D, YYYY")," - ").concat(m()(a).add(X-1,"days").format("MMM D, YYYY"))||m()(a).format("MMM D, YYYY"):k.bookings.date_select,Object(l.createElement)("span",null,Object(l.createElement)("i",{className:"far fa-calendar-alt"}))):Object(l.createElement)("button",{className:"wp-travel-date-picker-btn",onClick:n},a?!W&&"".concat(m()(a).format("MMM D, YYYY")," - ").concat(m()(a).add(X-1,"days").format("MMM D, YYYY"))||m()(a).format("MMM D, YYYY"):k.bookings.date_select,Object(l.createElement)("span",null,Object(l.createElement)("svg",{enableBackground:"new 0 0 512 512",height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg"},Object(l.createElement)("g",null,Object(l.createElement)("path",{d:"m446 40h-46v-24c0-8.836-7.163-16-16-16s-16 7.164-16 16v24h-224v-24c0-8.836-7.163-16-16-16s-16 7.164-16 16v24h-46c-36.393 0-66 29.607-66 66v340c0 36.393 29.607 66 66 66h380c36.393 0 66-29.607 66-66v-340c0-36.393-29.607-66-66-66zm-380 32h46v16c0 8.836 7.163 16 16 16s16-7.164 16-16v-16h224v16c0 8.836 7.163 16 16 16s16-7.164 16-16v-16h46c18.748 0 34 15.252 34 34v38h-448v-38c0-18.748 15.252-34 34-34zm380 408h-380c-18.748 0-34-15.252-34-34v-270h448v270c0 18.748-15.252 34-34 34z"})))))})),oe=x.chain(R).sortBy((function(e){return m()(e.start_date).unix()})).value()||[],se=(oe=oe.find((function(e){return m()(e.start_date).isAfter(m()(new Date))||m()(e.start_date).isSame(m()(new Date))})))&&m()(oe.start_date).toDate()||new Date,ue=new Date((new Date).setFullYear((new Date).getFullYear()+10)),pe={showMonthDropdown:!0,customInput:Object(l.createElement)(le,{isFixedDeparture:W,duration:X,selectedDate:a}),showYearDropdown:!0,dropdownMode:"select",minDate:se,maxDate:ue,onChange:function(e,t){if(W){U(D(D({},T),{},{excludedDateTimes:P,isLoading:!0,pricingUnavailable:!1}));var n={selectedDate:e,selectedDateTime:e},a=m()(new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0))).utc(),r=R.filter((function(n){return n.is_recurring&&(void 0===t&&"dates"===ve||"calendar"===ve)?(!n.end_date||"invalid date"==m()(e).toDate().toString().toLowerCase()||!m()(e).isAfter(m()(n.end_date)))&&G(n,a).find((function(t){return m()(m()(t).format("YYYY-MM-DD")).unix()===m()(m()(e).format("YYYY-MM-DD")).unix()}))instanceof Date:n.start_date?m()(e).isSame(m()(n.start_date)):m()(n.start_date).isSame(m()(e))})).map((function(e){return e.id})),i=r.map((function(e){return J[e].pricing_ids.split(",").map((function(e){return e.trim()}))}));n=(i=x.chain(i).flatten().uniq().value().filter((function(e){return""!=e&&void 0!==A[e]}))).length<=0?D(D({},n),{},{pricingUnavailable:!0}):D(D({},n),{},{nomineePricings:i}),n=D(D({},n),{},{selectedTripDate:r,isLoading:!1}),U(n)}else U({pricingUnavailable:!1,selectedDate:e,selectedDateTime:e,isLoading:!0})},filterDate:K};W||(delete pe.filterDate,pe.minDate=new Date,pe.startDate=a,pe.endDate=m()(a).add(X-1,"days").toDate());var de=x.size(L)>0&&Object.values(L).reduce((function(e,t){return e+t}))||0,me=S&&A[S].min_pax&&parseInt(A[S].min_pax)||1,fe=I.find((function(e){return e.date===m()(C).format("YYYY-MM-DD[T]HH:mm")})),_e=fe&&parseInt(fe.pax_available),ve=_wp_travel.trip_date_listing,be={pricing:A[S]||null,onPaxChange:te,counts:L,inventory:I,selectedPricingId:S,selectedDateIds:i,selectedDateTime:C,onTimeSelect:ee,nomineeTimes:g,totalPax:de,tripExtras:F,updateState:U,isLoading:N};return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",{className:"wp-travel-booking__header"},Object(l.createElement)("h3",null,k.booking_tab_content_label),a&&Object(l.createElement)("button",{onClick:function(){var e=Object.assign(T);W||delete e.nomineePricings,U(e)}},Object(l.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:0,y:0,viewBox:"0 0 36.9 41.7"},Object(l.createElement)("path",{d:"M35.8,17.1l-2.8,1c0.6,1.7,0.9,3.4,0.9,5.2c0,8.5-6.9,15.4-15.4,15.4C9.9,38.7,3,31.8,3,23.3C3,14.8,9.9,7.8,18.4,7.8 c1.3,0,2.6,0.2,3.9,0.5l-2.8,3l2.2,2L25,9.9l2.3-2.4L26,4.4L24.2,0l-2.8,1.1l1.8,4.3c-1.5-0.4-3.1-0.6-4.7-0.6 C8.3,4.8,0,13.1,0,23.3c0,10.2,8.3,18.4,18.4,18.4c10.2,0,18.4-8.3,18.4-18.4C36.9,21.2,36.5,19.1,35.8,17.1z"})),k.bookings.booking_tab_clear_all)),W&&"dates"===ve&&Object(l.createElement)("div",{className:"wp-travel-booking__content-wrapper"},Object(l.createElement)(l.Suspense,{fallback:Object(l.createElement)(b.a,null)},Object(l.createElement)(h,{dates:J,isTourDate:K,getPricingsByDate:Z,allData:B,onFixedDeparturePricingSelect:function(e,t,n){if(W){U(D(D({},T),{},{excludedDateTimes:P,isLoading:!0,pricingUnavailable:!1}));var a={selectedDate:e,selectedDateTime:e},r=Z(e,t,!0),i=r.map((function(e){return J[e].pricing_ids.split(",").map((function(e){return e.trim()}))}));a=(i=x.chain(i).flatten().uniq().value().filter((function(e){return""!=e&&void 0!==A[e]}))).length<=0?D(D({},a),{},{pricingUnavailable:!0}):D(D({},a),{},{nomineePricings:i}),a=D(D({},a),{},{selectedTripDate:r,isLoading:!0,selectedPricing:n}),U(a)}else U({pricingUnavailable:!1,selectedDate:e,selectedDateTime:e,isLoading:!0})},componentData:be,getPricingTripTimes:re})))||Object(l.createElement)("div",{className:"wp-travel-booking__datepicker-wrapper"},Object(l.createElement)(l.Suspense,{fallback:Object(l.createElement)(b.a,null)},Object(l.createElement)(O,pe),!C&&Object(l.createElement)("p",null,k.bookings.date_select_to_view_options)||null)),C&&Object(l.createElement)(l.Suspense,{fallback:Object(l.createElement)(b.a,null)},Object(l.createElement)("div",{className:N?"wp-travel-booking__pricing-wrapper wptravel-loading":"wp-travel-booking__pricing-wrapper"},d.length>1&&Object(l.createElement)(_.a,null,Object(l.createElement)(l.Suspense,{fallback:Object(l.createElement)(b.a,null)},Object(l.createElement)(j,{selected:S,options:d,onPricingSelect:ce}))),!z&&g.length>0&&Object(l.createElement)(_.a,null,Object(l.createElement)(l.Suspense,{fallback:Object(l.createElement)(b.a,null)},Object(l.createElement)(y,{selected:C,onTimeSelect:ee,options:g})))),Object(l.createElement)("div",{className:"wp-travel-booking__pricing-wrapper wptravel-pax-selector"},!z&&S&&I.find((function(e){return e.pax_available>0}))&&Object(l.createElement)(_.a,null,Object(l.createElement)(l.Suspense,{fallback:Object(l.createElement)(b.a,null)},Object(l.createElement)(w,{pricing:A[S]||null,onPaxChange:te,counts:L,inventory:I}))),!z&&de>0&&x.size(A[S].trip_extras)>0&&Object(l.createElement)(_.a,null,Object(l.createElement)(l.Suspense,{fallback:Object(l.createElement)(b.a,null)},Object(l.createElement)(E,{options:A[S].trip_extras,onChange:function(e,t){return function(){return U({tripExtras:D(D({},F),{},c()({},e,parseInt(t)))})}},counts:F}))),z&&Object(l.createElement)(l.Suspense,{fallback:Object(l.createElement)(b.a,null)},Object(l.createElement)(Y,null,B&&B.tripData.inventory&&"yes"==B.tripData.inventory.enable_trip_inventory&&Object(l.createElement)(M,{inventory:B.tripData.inventory})))),S&&Object(l.createElement)(l.Suspense,{fallback:Object(l.createElement)(b.a,null)},Object(l.createElement)("div",{className:"wp-travel-booking__panel-bottom"},Object(l.createElement)("div",{className:"left-info"},S&&Object(l.createElement)("p",null,Object(l.createElement)("strong",null,"Pricing"),": ",A[S].title),C&&Object(l.createElement)("p",null,Object(l.createElement)("strong",null,"Trip Date"),": ",Object(l.createElement)("span",null,m()(C).format(_wp_travel.date_format_moment)))),Object(l.createElement)("div",{className:"right-info"},Object(l.createElement)("p",null,k.bookings.booking_tab_cart_total,Object(l.createElement)("strong",{dangerouslySetInnerHTML:{__html:Object(v.a)(ne(!0))}})),Object(l.createElement)("button",{disabled:de<me||de>_e,onClick:function(){var e={trip_id:B.tripData.id,arrival_date:m()(C).format("YYYY-MM-DD"),pricing_id:S,pax:L,category_pax:L,trip_price:ne()};o&&(e.trip_time=m()(C).format("HH:mm"));var t={};Object.entries(F).forEach((function(e){var n=r()(e,2),a=n[0],i=n[1];i>0&&(t=D(D({},t),{},c()({},a,i)))})),x.size(t)>0&&(e.wp_travel_trip_extras={id:Object.keys(t),qty:Object.values(t)}),Object(v.b)(s()({url:"".concat(wp_travel.ajaxUrl,"?action=wp_travel_add_to_cart&_nonce=").concat(_wp_travel._nonce),method:"POST",data:e}).then((function(e){!0===e.success&&"WP_TRAVEL_ADDED_TO_CART"===e.data.code&&(wp_travel.isEnabledCartPage?location.href=wp_travel.cartUrl:location.href=wp_travel.checkoutUrl)})),1e3).catch((function(e){alert("[X] Request Timeout!")}))},className:"wp-travel-book"},k.bookings.booking_tab_booking_btn_label))))))}},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var a=_wp_travel,r=(a.currency,a.currency_symbol),i=a.currency_position,c=a.decimal_separator,l=a.number_of_decimals,o=a.thousand_separator,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"currency",n=new RegExp("\\d(?=(\\d{3})+\\".concat(c,")"),"gi"),a="$&".concat(o),s=parseFloat(e).toFixed(l).replace(/\./,c).replace(n,a);if("decimal"==t)return s;var u={left:"".concat(r,"<span>").concat(s,"</span>"),left_with_space:"".concat(r," <span>").concat(s,"</span>"),right:"<span>".concat(s,"</span>").concat(r),right_with_space:"<span>".concat(s,"</span> ").concat(r)};return u[i]},u=function(e){return new Promise((function(t,n){setTimeout((function(){n(new Error("[X] Timeout!"))}),1e3),t(e.then())}))}}}]);